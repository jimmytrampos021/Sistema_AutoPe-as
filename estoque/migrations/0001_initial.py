# Generated by Django 5.2.8 on 2025-11-23 19:53

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Aplicacao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('marca', models.CharField(max_length=50, verbose_name='Marca do Veículo')),
                ('modelo', models.CharField(max_length=100, verbose_name='Modelo')),
                ('ano_inicial', models.IntegerField(verbose_name='Ano Inicial')),
                ('ano_final', models.IntegerField(blank=True, help_text='Deixe em branco se ainda está em fabricação', null=True, verbose_name='Ano Final')),
                ('motor', models.CharField(blank=True, max_length=50, null=True, verbose_name='Motor')),
                ('observacoes', models.CharField(blank=True, max_length=200, null=True, verbose_name='Observações')),
            ],
            options={
                'verbose_name': 'Aplicação',
                'verbose_name_plural': 'Aplicações',
                'ordering': ['marca', 'modelo', 'ano_inicial'],
            },
        ),
        migrations.CreateModel(
            name='Categoria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True, verbose_name='Nome')),
                ('descricao', models.TextField(blank=True, null=True, verbose_name='Descrição')),
                ('icone', models.CharField(blank=True, help_text='Nome do ícone (ex: gear, car-front)', max_length=50, null=True, verbose_name='Ícone')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
            ],
            options={
                'verbose_name': 'Categoria',
                'verbose_name_plural': 'Categorias',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='Fabricante',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True, verbose_name='Nome')),
                ('pais_origem', models.CharField(blank=True, max_length=50, null=True, verbose_name='País de Origem')),
                ('site', models.URLField(blank=True, null=True, verbose_name='Website')),
                ('telefone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='Email')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
            ],
            options={
                'verbose_name': 'Fabricante',
                'verbose_name_plural': 'Fabricantes',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='Fornecedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome_fantasia', models.CharField(max_length=100, verbose_name='Nome Fantasia')),
                ('razao_social', models.CharField(blank=True, max_length=200, null=True, verbose_name='Razão Social')),
                ('cnpj', models.CharField(blank=True, max_length=18, null=True, verbose_name='CNPJ')),
                ('inscricao_estadual', models.CharField(blank=True, max_length=20, null=True, verbose_name='Inscrição Estadual')),
                ('telefone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('celular', models.CharField(blank=True, max_length=20, null=True, verbose_name='Celular')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='Email')),
                ('site', models.URLField(blank=True, null=True, verbose_name='Site')),
                ('contato_principal', models.CharField(blank=True, max_length=100, null=True, verbose_name='Contato Principal')),
                ('cep', models.CharField(blank=True, max_length=9, null=True, verbose_name='CEP')),
                ('logradouro', models.CharField(blank=True, max_length=200, null=True, verbose_name='Logradouro')),
                ('numero', models.CharField(blank=True, max_length=10, null=True, verbose_name='Número')),
                ('complemento', models.CharField(blank=True, max_length=100, null=True, verbose_name='Complemento')),
                ('bairro', models.CharField(blank=True, max_length=100, null=True, verbose_name='Bairro')),
                ('cidade', models.CharField(blank=True, max_length=100, null=True, verbose_name='Cidade')),
                ('estado', models.CharField(blank=True, max_length=2, null=True, verbose_name='Estado')),
                ('forma_pagamento_padrao', models.CharField(choices=[('AVISTA', 'À Vista'), ('7DD', '7 Dias'), ('14DD', '14 Dias'), ('21DD', '21 Dias'), ('28DD', '28 Dias'), ('30DD', '30 Dias'), ('60DD', '60 Dias'), ('90DD', '90 Dias'), ('OUTROS', 'Outros')], default='30DD', max_length=10, verbose_name='Forma Pagamento Padrão')),
                ('prazo_entrega_dias', models.IntegerField(default=0, verbose_name='Prazo de Entrega (dias)')),
                ('pedido_minimo', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Pedido Mínimo')),
                ('frete_gratis_acima', models.DecimalField(blank=True, decimal_places=2, default=0, max_digits=10, null=True, verbose_name='Frete Grátis Acima de')),
                ('banco', models.CharField(blank=True, max_length=100, null=True, verbose_name='Banco')),
                ('agencia', models.CharField(blank=True, max_length=20, null=True, verbose_name='Agência')),
                ('conta', models.CharField(blank=True, max_length=20, null=True, verbose_name='Conta')),
                ('pix', models.CharField(blank=True, max_length=100, null=True, verbose_name='Chave PIX')),
                ('classificacao', models.IntegerField(choices=[(5, '⭐⭐⭐⭐⭐ Excelente'), (4, '⭐⭐⭐⭐ Muito Bom'), (3, '⭐⭐⭐ Bom'), (2, '⭐⭐ Regular'), (1, '⭐ Ruim')], default=3, verbose_name='Classificação')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
            ],
            options={
                'verbose_name': 'Fornecedor',
                'verbose_name_plural': 'Fornecedores',
                'ordering': ['nome_fantasia'],
            },
        ),
        migrations.CreateModel(
            name='Produto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=50, unique=True, verbose_name='Código Interno')),
                ('codigo_sku', models.CharField(blank=True, max_length=50, null=True, unique=True, verbose_name='Código SKU')),
                ('codigo_barras', models.CharField(blank=True, max_length=50, null=True, verbose_name='Código de Barras/EAN')),
                ('referencia_fabricante', models.CharField(blank=True, max_length=100, null=True, verbose_name='Referência do Fabricante')),
                ('descricao', models.CharField(max_length=200, verbose_name='Descrição')),
                ('descricao_detalhada', models.TextField(blank=True, null=True, verbose_name='Descrição Detalhada')),
                ('loja', models.CharField(choices=[('1', 'Loja 1'), ('2', 'Loja 2')], default='1', max_length=1, verbose_name='Loja')),
                ('setor', models.CharField(blank=True, max_length=50, null=True, verbose_name='Setor')),
                ('prateleira', models.CharField(blank=True, choices=[('1', 'Prateleira 1'), ('2', 'Prateleira 2')], max_length=1, null=True, verbose_name='Prateleira')),
                ('divisao_prateleira', models.CharField(blank=True, max_length=10, null=True, verbose_name='Divisão da Prateleira')),
                ('localizacao_completa', models.CharField(blank=True, max_length=100, null=True, verbose_name='Localização Completa')),
                ('preco_custo', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Preço de Custo')),
                ('preco_venda_dinheiro', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Preço Venda - Dinheiro/PIX')),
                ('preco_venda_debito', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Preço Venda - Débito')),
                ('preco_venda_credito', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Preço Venda - Crédito')),
                ('preco_atacado', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Preço Atacado')),
                ('quantidade_minima_atacado', models.IntegerField(default=10, verbose_name='Qtd. Mínima Atacado')),
                ('margem_lucro_dinheiro', models.DecimalField(decimal_places=2, default=0, editable=False, max_digits=6, verbose_name='Margem Lucro (Dinheiro) %')),
                ('margem_lucro_credito', models.DecimalField(decimal_places=2, default=0, editable=False, max_digits=6, verbose_name='Margem Lucro (Crédito) %')),
                ('estoque_atual', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Estoque Atual')),
                ('estoque_minimo', models.IntegerField(default=5, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Estoque Mínimo')),
                ('estoque_maximo', models.IntegerField(default=100, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Estoque Máximo')),
                ('estoque_reservado', models.IntegerField(default=0, verbose_name='Estoque Reservado')),
                ('estoque_disponivel', models.IntegerField(default=0, editable=False, verbose_name='Estoque Disponível')),
                ('aplicacao_generica', models.CharField(blank=True, max_length=500, null=True, verbose_name='Aplicação Genérica')),
                ('peso', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True, verbose_name='Peso (kg)')),
                ('comprimento', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Comprimento (cm)')),
                ('largura', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Largura (cm)')),
                ('altura', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Altura (cm)')),
                ('ncm', models.CharField(blank=True, max_length=10, null=True, verbose_name='NCM')),
                ('unidade_medida', models.CharField(default='UN', max_length=10, verbose_name='Unidade')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('destaque', models.BooleanField(default=False, verbose_name='Produto em Destaque')),
                ('promocao', models.BooleanField(default=False, verbose_name='Em Promoção')),
                ('preco_promocional', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Preço Promocional')),
                ('imagem', models.ImageField(blank=True, null=True, upload_to='produtos/', verbose_name='Imagem do Produto')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('garantia_meses', models.IntegerField(default=3, verbose_name='Garantia (meses)')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('data_ultima_compra', models.DateTimeField(blank=True, null=True, verbose_name='Última Compra')),
                ('data_ultima_venda', models.DateTimeField(blank=True, null=True, verbose_name='Última Venda')),
                ('aplicacoes', models.ManyToManyField(blank=True, related_name='produtos', to='estoque.aplicacao', verbose_name='Aplicações')),
                ('categoria', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='produtos', to='estoque.categoria', verbose_name='Categoria')),
                ('fabricante', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='produtos', to='estoque.fabricante', verbose_name='Fabricante')),
                ('fornecedor_principal', models.ForeignKey(blank=True, help_text='Fornecedor com melhor preço atual', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='produtos_principal', to='estoque.fornecedor', verbose_name='Fornecedor Principal')),
                ('fornecedores_alternativos', models.ManyToManyField(blank=True, related_name='produtos_alternativos', to='estoque.fornecedor', verbose_name='Fornecedores Alternativos')),
            ],
            options={
                'verbose_name': 'Produto',
                'verbose_name_plural': 'Produtos',
                'ordering': ['descricao'],
            },
        ),
        migrations.CreateModel(
            name='MovimentacaoEstoque',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('E', 'Entrada'), ('S', 'Saída'), ('A', 'Ajuste'), ('D', 'Devolução')], max_length=1)),
                ('quantidade', models.IntegerField()),
                ('valor_unitario', models.DecimalField(decimal_places=2, max_digits=10)),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('documento', models.CharField(blank=True, max_length=50, null=True)),
                ('observacoes', models.TextField(blank=True, null=True)),
                ('usuario', models.CharField(max_length=100)),
                ('data_movimentacao', models.DateTimeField(auto_now_add=True)),
                ('produto', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='movimentacoes', to='estoque.produto')),
            ],
            options={
                'verbose_name': 'Movimentação de Estoque',
                'verbose_name_plural': 'Movimentações de Estoque',
                'ordering': ['-data_movimentacao'],
            },
        ),
        migrations.CreateModel(
            name='HistoricoPreco',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('preco_custo_anterior', models.DecimalField(decimal_places=2, max_digits=10)),
                ('preco_custo_novo', models.DecimalField(decimal_places=2, max_digits=10)),
                ('preco_venda_anterior', models.DecimalField(decimal_places=2, max_digits=10)),
                ('preco_venda_novo', models.DecimalField(decimal_places=2, max_digits=10)),
                ('data_alteracao', models.DateTimeField(auto_now_add=True)),
                ('motivo', models.CharField(blank=True, max_length=200, null=True)),
                ('usuario', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('produto', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='historico_precos', to='estoque.produto')),
            ],
            options={
                'verbose_name': 'Histórico de Preço',
                'verbose_name_plural': 'Históricos de Preços',
                'ordering': ['-data_alteracao'],
            },
        ),
        migrations.CreateModel(
            name='Subcategoria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, verbose_name='Nome')),
                ('descricao', models.TextField(blank=True, null=True, verbose_name='Descrição')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('categoria', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subcategorias', to='estoque.categoria', verbose_name='Categoria')),
            ],
            options={
                'verbose_name': 'Subcategoria',
                'verbose_name_plural': 'Subcategorias',
                'ordering': ['categoria__nome', 'nome'],
                'unique_together': {('categoria', 'nome')},
            },
        ),
        migrations.AddField(
            model_name='produto',
            name='subcategoria',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='produtos', to='estoque.subcategoria', verbose_name='Subcategoria'),
        ),
        migrations.CreateModel(
            name='CotacaoFornecedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('preco_unitario', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Preço Unitário')),
                ('quantidade_minima', models.IntegerField(default=1, verbose_name='Quantidade Mínima')),
                ('forma_pagamento', models.CharField(choices=[('AVISTA', 'À Vista'), ('7DD', '7 Dias'), ('14DD', '14 Dias'), ('21DD', '21 Dias'), ('28DD', '28 Dias'), ('30DD', '30 Dias'), ('60DD', '60 Dias'), ('90DD', '90 Dias'), ('OUTROS', 'Outros')], default='30DD', max_length=10, verbose_name='Forma de Pagamento')),
                ('prazo_entrega_dias', models.IntegerField(default=0, verbose_name='Prazo de Entrega (dias)')),
                ('valor_frete', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Valor do Frete')),
                ('desconto_percentual', models.DecimalField(blank=True, decimal_places=2, default=0, max_digits=5, null=True, verbose_name='Desconto (%)')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('numero_cotacao', models.CharField(blank=True, max_length=50, null=True, verbose_name='Nº Cotação do Fornecedor')),
                ('data_cotacao', models.DateField(default=django.utils.timezone.now, verbose_name='Data da Cotação')),
                ('validade_dias', models.IntegerField(default=30, verbose_name='Validade (dias)')),
                ('ativo', models.BooleanField(default=True, verbose_name='Cotação Ativa')),
                ('usuario_cadastro', models.CharField(blank=True, max_length=100, null=True, verbose_name='Usuário')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('fornecedor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cotacoes', to='estoque.fornecedor', verbose_name='Fornecedor')),
                ('produto', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cotacoes', to='estoque.produto', verbose_name='Produto')),
            ],
            options={
                'verbose_name': 'Cotação de Fornecedor',
                'verbose_name_plural': 'Cotações de Fornecedores',
                'ordering': ['-data_cotacao', 'preco_unitario'],
                'unique_together': {('produto', 'fornecedor', 'data_cotacao')},
            },
        ),
        migrations.AddIndex(
            model_name='produto',
            index=models.Index(fields=['codigo'], name='estoque_pro_codigo_a12776_idx'),
        ),
        migrations.AddIndex(
            model_name='produto',
            index=models.Index(fields=['codigo_sku'], name='estoque_pro_codigo__fda9f6_idx'),
        ),
        migrations.AddIndex(
            model_name='produto',
            index=models.Index(fields=['codigo_barras'], name='estoque_pro_codigo__986ed5_idx'),
        ),
        migrations.AddIndex(
            model_name='produto',
            index=models.Index(fields=['categoria', 'subcategoria'], name='estoque_pro_categor_8bf005_idx'),
        ),
    ]
